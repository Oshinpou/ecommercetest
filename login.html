<!-- FILE: login.html -->
<!DOCTYPE html>
<html>
<head><title>Login</title></head>
<body>
  <form onsubmit="login(event)">
    <input id="uid" placeholder="Username"><br>
    <input id="upass" placeholder="Password"><br>
    <button>Login</button>
  </form>
  <button onclick="signup()">Signup</button>
  <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
  <script>
    const gun = Gun();
    function login(e) {
      e.preventDefault();
      gun.get("users").get(uid.value).once(u => {
        if (u && u.pass === upass.value) {
          localStorage.setItem("macx_user", uid.value);
          location.href = "index.html";
        } else alert("Invalid");
      });
    }
    function signup() {
      gun.get("users").get(uid.value).put({ pass: upass.value });
      alert("Account created");
    }
  </script>
</body>
</html>
